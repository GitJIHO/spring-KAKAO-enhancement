<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <title>상품 페이지</title>
  <link href="/css/styles.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>상품 페이지</h1>
<form method="post" th:action="@{/admin/products/add}" th:if="${product == null}"
      th:object="${productRequest}">
  <h3>상품 추가</h3>
  <p>Name: <input th:field="*{name}" type="text"></p>
  <div th:errors="*{name}" th:if="${#fields.hasErrors('name')}">Name Error</div>
  <p>Price: <input th:field="*{price}" type="number"></p>
  <p>Image URL: <input th:field="*{img}" type="text"></p>
  <p>Category:
    <select th:field="*{categoryId}">
      <option th:each="category : ${categories}" th:text="${category.name}"
              th:value="${category.id}"></option>
    </select>
  </p>
  <p>
    <button type="submit">저장</button>
  </p>
</form>
<form method="post" th:action="@{/admin/products/edit/{id}(id=${product.id})}"
      th:if="${product != null}" th:object="${productRequest}">
  <h3>상품 정보 수정</h3>
  <p>ID: <span th:text="${product.id}"></span></p>
  <p>Name: <input th:field="*{name}" th:value="${product.name}" type="text"></p>
  <div th:errors="*{name}" th:if="${#fields.hasErrors('name')}">Name Error</div>
  <p>Price: <input th:field="*{price}" th:value="${product.price}" type="number"></p>
  <p>Image URL: <input th:field="*{img}" th:value="${product.img}" type="text"></p>
  <p>Category:
    <select th:field="*{categoryId}">
      <option th:each="category : ${categories}" th:selected="${category.id == product.category.id}"
              th:text="${category.name}"
              th:value="${category.id}"></option>
    </select>
  </p>
  <p>
    <button type="submit">저장</button>
  </p>
</form>
<a href="/admin/products">뒤로 가기</a>
</body>
</html>
